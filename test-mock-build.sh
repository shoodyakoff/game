#!/bin/bash

# –¶–≤–µ—Ç–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞
GREEN='\033[0;32m'
RED='\033[0;31m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

echo -e "${BLUE}üß™ –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç–æ–≤—É—é —Å–±–æ—Ä–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ mock-—Ä–µ–∂–∏–º–µ...${NC}"

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è mock-—Ä–µ–∂–∏–º–∞
export NEXT_PUBLIC_CLERK_MOCK_MODE=true
export NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=mock_key

# –ó–∞–ø—É—Å–∫–∞–µ–º —Å–±–æ—Ä–∫—É Next.js (—Å –æ–ø—Ü–∏–µ–π --no-lint –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è)
echo -e "${BLUE}üî® –°–±–æ—Ä–∫–∞ Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ mock-—Ä–µ–∂–∏–º–µ...${NC}"
npm run build -- --no-lint

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å–ø–µ—à–Ω–æ—Å—Ç—å —Å–±–æ—Ä–∫–∏
if [ $? -ne 0 ]; then
  echo -e "${RED}‚ùå –°–±–æ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —Å –æ—à–∏–±–∫–∞–º–∏${NC}"
  echo -e "${BLUE}‚ÑπÔ∏è –ù—É–∂–Ω–æ –æ–±–µ—Ä–Ω—É—Ç—å –±–æ–ª—å—à–µ —Å—Ç—Ä–∞–Ω–∏—Ü –≤ HOC withMockMode${NC}"
  exit 1
else
  echo -e "${GREEN}‚úÖ –°–±–æ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!${NC}"
  echo -e "${GREEN}‚ÑπÔ∏è –ü–æ–¥—Ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç, –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å –∫ –æ—Å—Ç–∞–ª—å–Ω—ã–º —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º${NC}"
fi 