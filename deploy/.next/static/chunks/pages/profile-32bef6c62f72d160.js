(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{9813:function(e,s,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return l(1201)}])},8724:function(e,s,l){"use strict";var t=l(5893),a=l(7294),r=l(1163),i=l(1649),n=l(3845),c=l(8696);let d=e=>{let{children:s,characterRequired:l=!1}=e,d=(0,r.useRouter)(),o=(0,i.I0)(),{isAuthenticated:m,loading:x}=(0,i.v9)(e=>e.auth),h=(0,i.v9)(n.BM),[u,j]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{let e=async()=>{await o((0,c.t0)()),j(!0)};e()},[o]),(0,a.useEffect)(()=>{if(!u)return;let e=!!localStorage.getItem("token");if(x||m||e){if(!x&&m&&l&&!h){let e=encodeURIComponent(d.asPath),s=d.asPath;s.includes("/dashboard")||s.includes("/levels")?d.push("/character?redirectTo=/levels"):d.push("/character?redirectTo=".concat(e))}}else{let e=encodeURIComponent(d.asPath);d.push("/auth/login?returnUrl=".concat(e))}},[x,m,d,l,h,u]),!x&&u&&(m||localStorage.getItem("token"))&&(!l||h))?(0,t.jsx)(t.Fragment,{children:s}):(0,t.jsx)("div",{className:"min-h-screen bg-slate-900"})};s.Z=d},1201:function(e,s,l){"use strict";l.r(s);var t=l(5893),a=l(7294),r=l(1649),i=l(9008),n=l.n(i),c=l(1664),d=l.n(c),o=l(3495),m=l(8724),x=l(8696),h=l(3845);let u=()=>{let e=(0,r.I0)(),{user:s}=(0,r.v9)(e=>e.auth),l=(0,r.v9)(h.BM),[i,c]=(0,a.useState)(!1);(0,a.useEffect)(()=>{c(!0)},[]);let[u,j]=(0,a.useState)({username:(null==s?void 0:s.username)||"",email:(null==s?void 0:s.email)||"",fullName:(null==s?void 0:s.fullName)||"",bio:(null==s?void 0:s.bio)||"",currentPassword:"",newPassword:"",confirmPassword:""}),[p,f]=(0,a.useState)(!1),[v,w]=(0,a.useState)({type:"",text:""}),[g,N]=(0,a.useState)("profile"),b=e=>{let{name:s,value:l}=e.target;j(e=>({...e,[s]:l}))},y=e=>{e.preventDefault(),f(!0),setTimeout(()=>{f(!1),w({type:"success",text:"Профиль успешно обновлен!"}),setTimeout(()=>{w({type:"",text:""})},3e3)},1e3)},k=e=>{if(e.preventDefault(),u.newPassword!==u.confirmPassword){w({type:"error",text:"Новый пароль и подтверждение не совпадают"});return}f(!0),setTimeout(()=>{f(!1),w({type:"success",text:"Пароль успешно обновлен!"}),j(e=>({...e,currentPassword:"",newPassword:"",confirmPassword:""})),setTimeout(()=>{w({type:"",text:""})},3e3)},1e3)},C=()=>{e((0,x.kS)())};return(0,t.jsx)(m.Z,{characterRequired:!0,children:(0,t.jsxs)("div",{className:"min-h-screen bg-slate-900",children:[(0,t.jsxs)(n(),{children:[(0,t.jsx)("title",{children:"Профиль | GOTOGROW"}),(0,t.jsx)("meta",{name:"description",content:"Управление профилем пользователя"})]}),(0,t.jsx)("header",{className:"bg-slate-800 shadow-lg",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-indigo-600 rounded-lg flex items-center justify-center mr-3",children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),(0,t.jsxs)("h1",{className:"text-2xl font-bold",children:[(0,t.jsx)("span",{className:"text-indigo-600",children:"GO"}),(0,t.jsx)("span",{className:"text-white",children:"TO"}),(0,t.jsx)("span",{className:"text-indigo-600",children:"GROW"})]})]}),(0,t.jsx)("nav",{className:"hidden md:block",children:(0,t.jsxs)("ul",{className:"flex space-x-4",children:[(0,t.jsx)("li",{children:(0,t.jsx)(d(),{href:"/dashboard",legacyBehavior:!0,children:(0,t.jsx)("a",{className:"nav-link",children:"Прогресс"})})}),(0,t.jsx)("li",{children:(0,t.jsx)(d(),{href:"/levels",legacyBehavior:!0,children:(0,t.jsx)("a",{className:"nav-link",children:"Играть"})})}),(0,t.jsx)("li",{children:(0,t.jsx)(d(),{href:"/profile",legacyBehavior:!0,children:(0,t.jsx)("a",{className:"nav-link-active",children:"Профиль"})})})]})}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[i&&s&&(0,t.jsxs)("span",{className:"text-sm text-slate-300 hidden md:inline-block",children:["Привет, ",(null==s?void 0:s.username)||(null==s?void 0:s.email)]}),(0,t.jsx)("button",{onClick:C,className:"bg-slate-700 hover:bg-slate-600 text-white text-sm py-2 px-4 rounded-lg transition-colors",children:"Выйти"})]})]})}),(0,t.jsx)("main",{className:"container-wide py-8",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,t.jsxs)("div",{className:"md:w-1/4",children:[(0,t.jsxs)("div",{className:"card mb-6",children:[l&&(0,t.jsxs)("div",{className:"mt-4 p-3 bg-slate-800 rounded-lg",children:[(0,t.jsx)("h4",{className:"text-sm uppercase text-slate-400 font-medium tracking-wider mb-2",children:"Ваш персонаж"}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-indigo-600/30 rounded-lg flex items-center justify-center mr-3",children:l.icon?(0,t.jsx)("img",{src:l.icon,alt:l.name,className:"w-full h-full object-cover rounded-lg"}):(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-indigo-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-bold text-white text-sm",children:l.name}),(0,t.jsx)("div",{className:"flex mt-1",children:(0,t.jsxs)("span",{className:"text-xs text-indigo-400 px-2 py-0.5 bg-indigo-900/30 rounded",children:["product-lead"===l.type&&"Стратег","agile-coach"===l.type&&"Поддержка","growth-hacker"===l.type&&"DPS","ux-visionary"===l.type&&"Дизайнер","tech-pm"===l.type&&"Гибрид",!l.type&&"Персонаж"]})})]})]}),(0,t.jsx)(d(),{href:"/character",legacyBehavior:!0,children:(0,t.jsxs)("a",{className:"mt-3 text-xs text-indigo-400 hover:text-indigo-300 inline-flex items-center",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m-4 6H4m0 0l4 4m-4-4l4-4"})}),"Сменить персонажа"]})})]}),(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t border-slate-700",children:[(0,t.jsx)("h4",{className:"text-sm uppercase text-slate-500 font-medium tracking-wider mb-3",children:"Навигация"}),(0,t.jsxs)("ul",{className:"space-y-2",children:[(0,t.jsx)("li",{children:(0,t.jsx)(d(),{href:"/dashboard",legacyBehavior:!0,children:(0,t.jsxs)("a",{className:"flex items-center text-slate-300 rounded-lg p-2 hover:bg-slate-700 transition-colors",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Прогресс"]})})}),(0,t.jsx)("li",{children:(0,t.jsx)(d(),{href:"/levels",legacyBehavior:!0,children:(0,t.jsxs)("a",{className:"flex items-center text-slate-300 rounded-lg p-2 hover:bg-slate-700 transition-colors",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Играть"]})})}),(0,t.jsx)("li",{children:(0,t.jsx)(d(),{href:"/profile",legacyBehavior:!0,children:(0,t.jsxs)("a",{className:"flex items-center text-white bg-slate-700 rounded-lg p-2 hover:bg-slate-600 transition-colors",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Профиль"]})})})]})]})]}),(0,t.jsxs)("div",{className:"card p-4 bg-gradient-to-r from-indigo-600 to-purple-600",children:[(0,t.jsx)("h3",{className:"font-bold text-lg mb-2",children:"Нужна помощь?"}),(0,t.jsx)("p",{className:"text-slate-200 text-sm mb-3",children:"Посетите наш справочный центр, если у вас возникли вопросы."}),(0,t.jsx)(d(),{href:"/help",legacyBehavior:!0,children:(0,t.jsx)("a",{className:"inline-block bg-white/20 hover:bg-white/30 text-white px-3 py-1 rounded text-sm font-medium transition-colors",children:"Поддержка"})})]})]}),(0,t.jsxs)("div",{className:"md:w-3/4",children:[(0,t.jsxs)("div",{className:"card mb-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h2",{className:"text-xl font-bold",children:"Настройки профиля"}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("button",{onClick:()=>N("profile"),className:"px-4 py-2 rounded-lg ".concat("profile"===g?"bg-indigo-600 text-white":"bg-slate-700 text-slate-300"),children:"Профиль"}),(0,t.jsx)("button",{onClick:()=>N("security"),className:"px-4 py-2 rounded-lg ".concat("security"===g?"bg-indigo-600 text-white":"bg-slate-700 text-slate-300"),children:"Безопасность"})]})]}),v.text&&(0,t.jsx)(o.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 p-3 rounded ".concat("success"===v.type?"bg-emerald-500/20 text-emerald-400":"bg-red-500/20 text-red-400"),children:v.text}),"profile"===g?(0,t.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"username",className:"form-label",children:"Имя пользователя"}),(0,t.jsx)("input",{type:"text",id:"username",name:"username",value:u.username,onChange:b,className:"input-field",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email"}),(0,t.jsx)("input",{type:"email",id:"email",name:"email",value:u.email,onChange:b,className:"input-field",required:!0})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"fullName",className:"form-label",children:"Полное имя"}),(0,t.jsx)("input",{type:"text",id:"fullName",name:"fullName",value:u.fullName,onChange:b,className:"input-field"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"bio",className:"form-label",children:"О себе"}),(0,t.jsx)("textarea",{id:"bio",name:"bio",value:u.bio,onChange:b,rows:4,className:"input-field",placeholder:"Расскажите немного о себе..."})]}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)("button",{type:"submit",className:"btn-primary flex items-center justify-center",disabled:p,children:p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Сохранение..."]}):"Сохранить изменения"})})]}):(0,t.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"currentPassword",className:"form-label",children:"Текущий пароль"}),(0,t.jsx)("input",{type:"password",id:"currentPassword",name:"currentPassword",value:u.currentPassword,onChange:b,className:"input-field",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"newPassword",className:"form-label",children:"Новый пароль"}),(0,t.jsx)("input",{type:"password",id:"newPassword",name:"newPassword",value:u.newPassword,onChange:b,className:"input-field",required:!0}),(0,t.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:"Пароль должен содержать минимум 8 символов, включая цифры и специальные символы"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"confirmPassword",className:"form-label",children:"Подтверждение пароля"}),(0,t.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:u.confirmPassword,onChange:b,className:"input-field",required:!0})]}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)("button",{type:"submit",className:"btn-primary flex items-center justify-center",disabled:p,children:p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Сохранение..."]}):"Обновить пароль"})})]})]}),(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Удаление аккаунта"}),(0,t.jsx)("p",{className:"text-slate-400 mb-4",children:"Внимание! Удаление аккаунта является необратимым действием. Все ваши данные, включая игровой прогресс и достижения, будут безвозвратно удалены."}),(0,t.jsx)("button",{className:"bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg transition-colors",children:"Удалить аккаунт"})]})]})]})}),(0,t.jsx)("footer",{className:"bg-slate-800/50 border-t border-slate-700 py-6",children:(0,t.jsx)("div",{className:"container-wide",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[(0,t.jsx)("div",{className:"mb-4 md:mb-0",children:(0,t.jsx)("p",{className:"text-sm text-slate-400",children:"\xa9 2023 GOTOGROW. Все права защищены."})}),(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsx)(d(),{href:"/privacy",legacyBehavior:!0,children:(0,t.jsx)("a",{className:"text-sm text-slate-400 hover:text-white",children:"Политика конфиденциальности"})}),(0,t.jsx)(d(),{href:"/terms",legacyBehavior:!0,children:(0,t.jsx)("a",{className:"text-sm text-slate-400 hover:text-white",children:"Условия использования"})}),(0,t.jsx)(d(),{href:"/help",legacyBehavior:!0,children:(0,t.jsx)("a",{className:"text-sm text-slate-400 hover:text-white",children:"Помощь"})})]})]})})})]})})};s.default=u}},function(e){e.O(0,[495,664,774,888,179],function(){return e(e.s=9813)}),_N_E=e.O()}]);