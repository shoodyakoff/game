(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[461],{6659:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/register",function(){return a(5161)}])},5161:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return x}});var t=a(5893),r=a(7294),i=a(1163),n=a(9008),l=a.n(n),o=a(1664),c=a.n(o),m=a(1649),d=a(3495),u=a(8696),p=a(4852);function x(){let e=(0,i.useRouter)(),s=(0,p.T)(),{loading:a,error:n,isAuthenticated:o}=(0,m.v9)(e=>e.auth),[x,h]=(0,r.useState)({username:"",email:"",password:"",confirmPassword:""}),[f,w]=(0,r.useState)({username:"",email:"",password:"",confirmPassword:""}),[y,j]=(0,r.useState)(!1),[N,b]=(0,r.useState)(!1),{returnUrl:v}=e.query;(0,r.useEffect)(()=>{b(!0)},[]),(0,r.useEffect)(()=>{if(o){let s=v?decodeURIComponent(v):"/dashboard",a="string"==typeof s&&!s.includes("/auth/")&&!s.includes("returnUrl=");e.push(a?s:"/dashboard")}},[o,v,e]),(0,r.useEffect)(()=>{n&&y&&(s((0,u.fw)()),j(!1))},[x,n,s,y]),(0,r.useEffect)(()=>{x.confirmPassword&&x.password!==x.confirmPassword?w(e=>({...e,confirmPassword:"Пароли не совпадают"})):w(e=>({...e,confirmPassword:""}))},[x.password,x.confirmPassword]);let g=e=>{let{name:s,value:a}=e.target;h({...x,[s]:a}),f[s]&&w({...f,[s]:""})},E=()=>{let e={username:"",email:"",password:"",confirmPassword:""},s=!0;return x.username.length<3&&(e.username="Имя пользователя должно содержать не менее 3 символов",s=!1),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(x.email)||(e.email="Введите корректный email адрес",s=!1),x.password.length<6&&(e.password="Пароль должен содержать не менее 6 символов",s=!1),x.password!==x.confirmPassword&&(e.confirmPassword="Пароли не совпадают",s=!1),w(e),s},P=async e=>{e.preventDefault(),E()&&(j(!0),s((0,u.z2)({username:x.username,email:x.email,password:x.password})))};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l(),{children:[(0,t.jsx)("title",{children:"Регистрация | GOTOGROW"}),(0,t.jsx)("meta",{name:"description",content:"Зарегистрируйтесь, чтобы начать играть"})]}),(0,t.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-gradient-to-br from-gray-900 to-slate-900 flex flex-col justify-center items-center px-4 sm:px-6 lg:px-8",style:{pointerEvents:"auto"},children:(0,t.jsxs)(d.E.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"w-full max-w-md",style:{pointerEvents:"auto"},children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)(d.E.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.1},className:"mb-6",children:(0,t.jsx)("div",{className:"h-20 mx-auto flex items-center justify-center",children:(0,t.jsxs)("h1",{className:"text-3xl font-bold text-indigo-400",children:["GAME",(0,t.jsx)("span",{className:"text-white",children:"PORTAL"})]})})}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Создайте аккаунт"}),(0,t.jsx)("p",{className:"text-gray-300",children:"Присоединяйтесь к нашему игровому сообществу"})]}),(0,t.jsxs)("div",{className:"bg-gray-800 rounded-lg shadow-xl p-6 sm:p-8",children:[n&&(0,t.jsx)(d.E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"bg-red-500/10 border border-red-500/50 text-red-300 px-4 py-3 rounded mb-6",children:(0,t.jsx)("p",{children:n})}),(0,t.jsxs)("form",{onSubmit:P,className:"space-y-5",style:{pointerEvents:"auto"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-300 mb-1",children:"Имя пользователя"}),(0,t.jsx)("input",{id:"username",name:"username",type:"text",required:!0,value:x.username,onChange:g,className:"input-primary w-full",placeholder:"username",style:{pointerEvents:"auto"}}),f.username&&(0,t.jsx)("p",{className:"form-error",children:f.username})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-1",children:"Email"}),(0,t.jsx)("input",{id:"email",name:"email",type:"email",required:!0,value:x.email,onChange:g,className:"input-primary w-full",placeholder:"your@email.com",style:{pointerEvents:"auto"}}),f.email&&(0,t.jsx)("p",{className:"form-error",children:f.email})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-1",children:"Пароль"}),(0,t.jsx)("input",{id:"password",name:"password",type:"password",required:!0,value:x.password,onChange:g,className:"input-primary w-full",placeholder:"••••••••",style:{pointerEvents:"auto"}}),f.password&&(0,t.jsx)("p",{className:"form-error",children:f.password})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-300 mb-1",children:"Подтвердите пароль"}),(0,t.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:x.confirmPassword,onChange:g,className:"input-primary w-full",placeholder:"••••••••",style:{pointerEvents:"auto"}}),f.confirmPassword&&(0,t.jsx)("p",{className:"form-error",children:f.confirmPassword})]}),(0,t.jsx)("div",{className:"pt-2",children:(0,t.jsx)("button",{type:"submit",disabled:a,className:"btn-primary w-full",style:{pointerEvents:"auto"},children:a?(0,t.jsxs)("span",{className:"flex items-center justify-center",children:[(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Регистрация..."]}):"Зарегистрироваться"})})]}),(0,t.jsxs)("div",{className:"mt-6 text-center text-sm",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Уже есть аккаунт? "}),(0,t.jsx)(c(),{href:"/auth/login",className:"text-blue-400 hover:text-blue-300 font-medium",children:"Войти"})]})]}),(0,t.jsx)("div",{className:"mt-8 text-center text-sm text-gray-400",children:(0,t.jsx)(c(),{href:"/",className:"hover:text-white",children:"← Вернуться на главную"})})]})})]})}},4852:function(e,s,a){"use strict";a.d(s,{T:function(){return r}});var t=a(1649);let r=()=>(0,t.I0)()}},function(e){e.O(0,[495,664,774,888,179],function(){return e(e.s=6659)}),_N_E=e.O()}]);